---
kind: Build
name: worker
type: container

---
kind: Deploy
description: The worker that collects votes and stores results in a postgres table
type: kubernetes
name: worker
build: worker
spec:
  files:
    - manifests/*
  defaultTarget:
    kind: Deployment
    name: worker
dependencies:
  - deploy.redis
  - run.db-init
variables:
  image: "${actions.build.worker.outputs.deployment-image-id}"
